= EFS CSI Driver

https://docs.aws.amazon.com/eks/latest/userguide/efs-csi.html

== Deploy the AWS EFS CSI Driver

Create the Service Account with the Role ARN attached:

[source,bash]
----
envsubst < service-account.yaml | kubectl apply -f -
----

Add Helm Repository:

[source,bash]
----
helm repo add aws-efs-csi-driver https://kubernetes-sigs.github.io/aws-efs-csi-driver/
helm repo update
----

Set version and download values (if not exists):

[source,bash]
----
export AWS_EFS_CSI_CHART_VERSION="1.3.2"
helm show values aws-efs-csi-driver/aws-efs-csi-driver --version "${AWS_EFS_CSI_CHART_VERSION}" > aws-efs-csi-driver-values.yaml
----

Install the AWS EFS CSI Driver with Helm:

[source,bash]
----
helm upgrade -i aws-efs-csi-driver aws-efs-csi-driver/aws-efs-csi-driver \
   --version "${AWS_EFS_CSI_CHART_VERSION}" \
   --namespace kube-system \
   --values ./aws-efs-csi-driver-values.yaml
----
