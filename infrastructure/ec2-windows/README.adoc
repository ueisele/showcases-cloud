= EC2 Windows with AD

Windows EC2 instaces connect automatically to AWS Directory Service. 

== Apply Terraform

IMPORTANT: Requires at least one public subnet.

[source,bash]
----
terraform init -backend-config="profile=${SHOWCASE_AWS_PROFILE}"
----

[source,bash]
----
terraform apply \
    --var "local_ldap_id=${LOCAL_LDAP_ID}" \
    --var "remote_ldap_id=${REMOTE_LDAP_ID}" \
    --var "profile=${SHOWCASE_AWS_PROFILE}"
----

== RDP Connection to Windows

On linux you could use https://remmina.org/

Guide: https://github.com/fpco/terraform-aws-foundation/tree/master/examples/ad-ec2

.Local Domain Windows credentials and host:
[source,bash]
----
terraform output local_windows_public_dns
terraform output local_windows_username
terraform output local_windows_password
----

.Remote Domain Windows credentials and host:
[source,bash]
----
terraform output remote_windows_public_dns
terraform output remote_windows_username
terraform output remote_windows_password
----

== Manage AD

Install the Active Directory Administration Tools on the Windows instance (see https://docs.aws.amazon.com/directoryservice/latest/admin-guide/ms_ad_install_ad_tools.html).

== References

* https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/EC2_GetStarted.html
* https://docs.aws.amazon.com/directoryservice/latest/admin-guide/launching_instance.html
* https://github.com/fpco/terraform-aws-foundation/tree/master/examples/ad-ec2